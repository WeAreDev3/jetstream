function signinCallback(a){if(console.log(a),a.code){console.log("Succeeded!");var b=new XMLHttpRequest;b.open("POST","/auth/google/callback",!0),b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),b.send(JSON.stringify({id_token:a.id_token}))}else a.error&&console.log("There was an error: "+a.error)}function initChats(){for(var a=document.getElementById("content").getElementsByTagName("tbody")[0],b=document.createDocumentFragment(),c=0,d=chats.length;d>c;c++)addChat(b,chats[c]);a.appendChild(b)}function addChat(a,b){var c=document.createElement("tr"),d=document.createElement("td"),e=document.createElement("td"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("td"),i=document.createElement("tr"),j=document.createElement("td"),k=document.createElement("div"),l=document.createElement("input"),m=document.createElement("button");c.classList.add("chat-mini"),i.classList.add("chat"),d.classList.add("chat-name"),f.classList.add("outer-wrapper"),g.classList.add("inner-wrapper"),e.classList.add("latest-message"),h.classList.add("date"),k.classList.add("input"),l.type="text",j.colSpan="3",d.textContent=b.name?b.name:b.people.toString(),c.appendChild(d),c.appendChild(e),e.appendChild(f),f.appendChild(g),c.appendChild(h),i.appendChild(j),j.appendChild(k),k.appendChild(l),k.appendChild(m);var n,o;for(n=0,o=b.messages.length;o>n;n++)addMessage(j,b.messages[n]);n--,h.textContent=parseDate(b.messages[n].date),g.textContent=b.messages[n].content,m.textContent="Send",a.appendChild(c),a.appendChild(i)}function addMessage(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div");c.classList.add(b.user===user.name?"right":"left"),d.classList.add("profile-pic"),e.classList.add("content"),f.classList.add("user"),g.classList.add("date"),h.classList.add("time"),i.classList.add("message"),d.textContent="",f.textContent=b.user===user.name?"You":b.user,g.textContent=parseDate(b.date),h.textContent=parseTime(b.date),i.textContent=b.content,e.appendChild(f),e.appendChild(g),e.appendChild(h),e.appendChild(i),c.appendChild(d),c.appendChild(e),a.appendChild(c)}function toggleChat(){openChat&&this!=openChat&&(openChat.classList.remove("expanded"),openChat.nextElementSibling.classList.remove("expanded")),this.classList.toggle("expanded"),this.nextElementSibling.classList.toggle("expanded"),openChat=this}function respond(){""===(this.value?this.value:this.previousElementSibling.value),addMessage(this.parentElement.parentElement,{user:"Tal Ben-Ari",date:new Date,content:this.value?this.value:this.previousElementSibling.value}),this.value?this.value="":this.previousElementSibling.value=""}function parseDate(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"];return b[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()}function parseTime(a){var b="AM",c=a.getHours(),d=a.getMinutes();return c>11&&(b="PM",c>12&&(c-=12)),10>d&&(d="0"+d),c+":"+d+" "+b}window.addEventListener("DOMContentLoaded",function(){initChats();for(var a=document.getElementsByClassName("chat-mini"),b=a.length,c=0;b>c;c++)a[c].onclick=toggleChat;var d=document.getElementsByTagName("input");b=d.length;for(var c=0;c<d.length;c++)d[c].onkeypress=function(a){13===a.keyCode&&respond.bind(this)()};var e=document.getElementsByTagName("button");b=e.length;for(var c=0;c<e.length;c++)e[c].onclick=respond});var chats=[{name:null,people:"Jesse Smick",messages:[{user:"Jesse Smick",date:new Date(2014,5,27,11,45),content:"What's up?"},{user:"Tal Ben-Ari",date:new Date,content:"Not much, just working on an awesome new chatting platform thing."}]},{name:null,people:"Michael Edlinger",messages:[{user:"Michael Edlinger",date:new Date(2014,5,27,22,45),content:"What's up?"},{user:"Tal Ben-Ari",date:new Date,content:"Not much, just reworking this stuff"}]}],user={name:"Tal Ben-Ari"},openChat=null;